apply plugin: 'java'
apply plugin: 'eclipse'

repositories {
    mavenCentral()
}

ext {
	jrubyVersion = "1.7.12"
}

apply from: file('gradle/jruby.gradle')

dependencies {
    compile "org.jruby:jruby-complete:${jrubyVersion}"
    compile 'io.netty:netty-transport:4.0.19.Final'
    testCompile "junit:junit:4.11"
}

sourceSets {
	main {
		java.srcDir 'ext/cool.io'
		resources.srcDir 'ext/cool.io'
	}
	test {
		java.srcDir 'spec'
		resources.srcDir 'spec'
	}
}

jar {
	archiveName = "cool_io.jar"
	destinationDir = file("lib/")
	from(configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }) {
		include "io/netty/**"
	}
	excludes = ["*.rb", "*.c", "*.h"]
}

sourceCompatibility = targetCompatibility = 1.8

eclipse {
	classpath {
		containers = [
			'org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-1.8'
		]
	}
}

